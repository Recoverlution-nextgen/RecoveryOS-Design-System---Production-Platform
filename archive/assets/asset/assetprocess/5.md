selectAssetSet() as a PortalShell “skin” selector that returns a full bundle (background/loop, grain, glass, seal pulse, optional audio bed), all budget-checked and reduced-motion safe.  
```

// src/assets/selectAssetSet.ts
import { selectAsset, type AssetRegistry, type SelectedAsset } from "./selectAsset";
import { type Lens, type Surface } from "./mappings";

export type AssetSetIntent =
  | "portal_shell"
  | "marketing_keynote"
  | "journeys_install"
  | "navicues_feed"
  | "toolkit_read"
  | "wellbeing_session"
  | "state_checkin"
  | "proof_vault"
  | "console_dashboard"
  | "command_center"
  | "trust_layer";

export type AssetSetInput = {
  registry: AssetRegistry;

  surface: Surface;
  lens?: Lens;

  intent: AssetSetIntent;

  // Optional context
  schemaIds?: string[];
  pillarIds?: string[];
  proofFit?: string[];

  // Rendering constraints
  maxWidth?: number;
  prefersReducedMotion?: boolean;
  allowMotion?: boolean;

  // Choose “mood” without hardcoding (future)
  moodTags?: string[]; // e.g., ["quiet", "precision", "spine", "proof"]
};

export type SelectedAssetSet = {
  intent: AssetSetIntent;
  surface: Surface;
  lens?: Lens;

  // Bundle
  background?: SelectedAsset;      // image OR loop (if allowed)
  overlay?: SelectedAsset;         // thread/halo overlay (system/ui_texture)
  grain?: SelectedAsset;           // ui_texture grain/noise
  glass?: SelectedAsset;           // ui_texture glass surface
  sealPulse?: SelectedAsset;       // ui_texture seal pulse (optional)
  receiptTexture?: SelectedAsset;  // proof texture (optional)
  iconPack?: SelectedAsset;        // icon sprite sheet / placeholder (optional)
  audioBed?: SelectedAsset;        // audio bed (optional)

  // Diagnostics
  warnings: string[];
  missing: string[]; // keys that failed to resolve
};

function mergeWarnings(...assets: Array<SelectedAsset | undefined>) {
  return assets.flatMap((a) => (a?.warnings ? a.warnings : []));
}

/**
 * A tiny helper: prefer a motion_loop background when motion is allowed;
 * otherwise select a static atmosphere background.
 */
function selectBackground({
  registry,
  surface,
  lens,
  maxWidth,
  prefersReducedMotion,
  allowMotion,
  schemaIds,
  pillarIds,
}: {
  registry: AssetRegistry;
  surface: Surface;
  lens?: Lens;
  maxWidth?: number;
  prefersReducedMotion?: boolean;
  allowMotion?: boolean;
  schemaIds?: string[];
  pillarIds?: string[];
}) {
  const reduced = Boolean(prefersReducedMotion);

  // Try motion loop first (if not reduced)
  if (!reduced) {
    const loop = selectAsset({
      registry,
      surface,
      component: "AmbientField",
      lens,
      assetClassOverride: "motion_loop",
      kind: "video",
      maxWidth,
      prefersReducedMotion,
      allowMotion,
      schemaIds,
      pillarIds,
    });
    if (loop) return loop;
  }

  // Fall back to static atmosphere
  return selectAsset({
    registry,
    surface,
    component: "AmbientField",
    lens,
    assetClassOverride: "atmosphere",
    kind: "image",
    maxWidth,
    prefersReducedMotion,
    allowMotion,
    schemaIds,
    pillarIds,
  });
}

/**
 * selectAssetSet()
 * Returns a complete “skin” bundle for a surface/intent.
 * - Always reduced-motion safe
 * - Always budget checked (selectAsset adds warnings)
 * - Works even if some assets are missing (reports missing keys)
 */
export function selectAssetSet(input: AssetSetInput): SelectedAssetSet {
  const missing: string[] = [];

  const base = {
    registry: input.registry,
    surface: input.surface,
    lens: input.lens,
    maxWidth: input.maxWidth,
    prefersReducedMotion: input.prefersReducedMotion,
    allowMotion: input.allowMotion,
    schemaIds: input.schemaIds,
    pillarIds: input.pillarIds,
    proofFit: input.proofFit,
  };

  // --- Background (loop or static)
  const background = selectBackground(base);
  if (!background) missing.push("background");

  // --- Universal textures (used almost everywhere)
  const grain = selectAsset({
    registry: base.registry,
    surface: base.surface,
    component: "GrainOverlay",
    lens: base.lens,
    assetClassOverride: "ui_texture",
    kind: "image",
    maxWidth: 1024,
    prefersReducedMotion: base.prefersReducedMotion,
    allowMotion: false,
    schemaIds: base.schemaIds,
    pillarIds: base.pillarIds,
  });
  if (!grain) missing.push("grain");

  const glass = selectAsset({
    registry: base.registry,
    surface: base.surface,
    component: "GlassSurface",
    lens: base.lens,
    assetClassOverride: "ui_texture",
    kind: "image",
    maxWidth: 1024,
    prefersReducedMotion: base.prefersReducedMotion,
    allowMotion: false,
    schemaIds: base.schemaIds,
    pillarIds: base.pillarIds,
  });
  if (!glass) missing.push("glass");

  // --- Overlays vary by intent
  let overlay: SelectedAsset | undefined;
  let sealPulse: SelectedAsset | undefined;
  let receiptTexture: SelectedAsset | undefined;
  let audioBed: SelectedAsset | undefined;

  const isTrust = input.intent === "trust_layer" || input.surface.includes("trust") || input.surface.startsWith("sys_");
  const isProof = input.intent === "proof_vault" || input.surface.includes("proof");
  const isDashboard = input.intent === "console_dashboard" || input.intent === "command_center" || input.surface.startsWith("con_") || input.surface.startsWith("cc_");
  const isMarketing = input.surface.startsWith("mkt_") || input.intent === "marketing_keynote";

  // Overlay: "thread" for system/dash, "halo" for journeys, minimal for marketing
  if (isDashboard || isTrust) {
    overlay = selectAsset({
      registry: base.registry,
      surface: base.surface,
      component: "ThreadOverlay",
      lens: base.lens,
      assetClassOverride: "ui_texture",
      kind: "image",
      maxWidth: 1600,
      prefersReducedMotion: base.prefersReducedMotion,
      allowMotion: false,
      schemaIds: base.schemaIds,
      pillarIds: base.pillarIds,
    });
    if (!overlay) missing.push("overlay");
  } else if (input.intent === "journeys_install" || input.surface.includes("journeys")) {
    overlay = selectAsset({
      registry: base.registry,
      surface: base.surface,
      component: "PillarHalo",
      lens: base.lens,
      assetClassOverride: "ui_texture",
      kind: "image",
      maxWidth: 1600,
      prefersReducedMotion: base.prefersReducedMotion,
      allowMotion: false,
      schemaIds: base.schemaIds,
      pillarIds: base.pillarIds,
    });
    if (!overlay) missing.push("overlay");
  } else if (isMarketing) {
    overlay = selectAsset({
      registry: base.registry,
      surface: base.surface,
      component: "ThreadOverlay",
      lens: base.lens,
      assetClassOverride: "ui_texture",
      kind: "image",
      maxWidth: 1600,
      prefersReducedMotion: base.prefersReducedMotion,
      allowMotion: false,
      schemaIds: base.schemaIds,
      pillarIds: base.pillarIds,
    });
    // overlay optional for marketing
  }

  // Seal pulse: show in trust/proof contexts
  if (isTrust || isProof) {
    sealPulse = selectAsset({
      registry: base.registry,
      surface: base.surface,
      component: "SealPulse",
      lens: base.lens,
      assetClassOverride: "ui_texture",
      kind: "image",
      maxWidth: 1024,
      prefersReducedMotion: base.prefersReducedMotion,
      allowMotion: false,
      schemaIds: base.schemaIds,
      pillarIds: base.pillarIds,
    });
    if (!sealPulse) missing.push("sealPulse");
  }

  // Proof texture: only for proof contexts
  if (isProof) {
    receiptTexture = selectAsset({
      registry: base.registry,
      surface: base.surface,
      component: "ReceiptTexture",
      lens: base.lens,
      assetClassOverride: "proof",
      kind: "image",
      maxWidth: 1024,
      prefersReducedMotion: base.prefersReducedMotion,
      allowMotion: false,
      schemaIds: base.schemaIds,
      pillarIds: base.pillarIds,
      proofFit: ["receipt_ready", ...(base.proofFit ?? [])],
    });
    if (!receiptTexture) missing.push("receiptTexture");
  }

  // Audio bed: marketing keynote + player + optional in trust
  if (input.intent === "marketing_keynote" || input.surface === "cmp_player" || input.intent === "portal_shell") {
    audioBed = selectAsset({
      registry: base.registry,
      surface: base.surface,
      component: "AudioBed",
      lens: base.lens,
      assetClassOverride: "audio_bed",
      kind: "audio",
      prefersReducedMotion: base.prefersReducedMotion,
      allowMotion: true,
      schemaIds: base.schemaIds,
      pillarIds: base.pillarIds,
    });
    // audio optional; if missing, fine
  }

  const warnings = mergeWarnings(background, overlay, grain, glass, sealPulse, receiptTexture, audioBed);

  return {
    intent: input.intent,
    surface: input.surface,
    lens: input.lens,
    background: background ?? undefined,
    overlay,
    grain: grain ?? undefined,
    glass: glass ?? undefined,
    sealPulse,
    receiptTexture,
    audioBed,
    warnings,
    missing,
  };
}

```
## **Example usage (PortalShell skin)**  
```

const skin = selectAssetSet({
  registry,
  surface: "cmp_portal_shell",
  lens: "individual",
  intent: "portal_shell",
  maxWidth: 1920,
  prefersReducedMotion: window.matchMedia("(prefers-reduced-motion: reduce)").matches,
  schemaIds: ["schema_real_life_run"],
});

// skin.background, skin.grain, skin.glass, skin.overlay, skin.audioBed...

```
